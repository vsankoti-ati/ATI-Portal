{"ast":null,"code":"import _slicedToArray from\"/home/shankotai/ATI-IntranetPortal/react-goapp-sample/ATI-Portal/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useNavigate,useOutletContext}from\"react-router-dom\";import Input from\"./form/Input\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassowrd=_useState4[1];var _useOutletContext=useOutletContext(),setJwtToken=_useOutletContext.setJwtToken;var _useOutletContext2=useOutletContext(),setAlertClassName=_useOutletContext2.setAlertClassName;var _useOutletContext3=useOutletContext(),setAlertMessage=_useOutletContext3.setAlertMessage;var _useOutletContext4=useOutletContext(),toggleRefresh=_useOutletContext4.toggleRefresh;var navigate=useNavigate();var handleSubmit=function handleSubmit(event){event.preventDefault();// build the request payload\nvar payload={email:email,password:password};var requestOptions={method:\"POST\",headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify(payload)};fetch(\"/authenticate\",requestOptions).then(function(response){return response.json();}).then(function(data){if(data.error){setAlertClassName(\"alert-danger\");setAlertMessage(data.message);}else{setJwtToken(data.access_token);setAlertClassName(\"d-none\");setAlertMessage(\"\");toggleRefresh(true);navigate(\"/\");}}).catch(function(error){setAlertClassName(\"alert-danger\");setAlertMessage(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 offset-md-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,{title:\"Email Address\",type:\"email\",className:\"form-control\",name:\"email\",autoComplete:\"email-new\",onChange:function onChange(event){return setEmail(event.target.value);}}),/*#__PURE__*/_jsx(Input,{title:\"Password\",type:\"password\",className:\"form-control\",name:\"password\",autoComplete:\"password-new\",onChange:function onChange(event){return setPassowrd(event.target.value);}}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-primary\",value:\"Login\"})]})]});};export default Login;","map":{"version":3,"names":["useState","useNavigate","useOutletContext","Input","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassowrd","_useOutletContext","setJwtToken","_useOutletContext2","setAlertClassName","_useOutletContext3","setAlertMessage","_useOutletContext4","toggleRefresh","navigate","handleSubmit","event","preventDefault","payload","requestOptions","method","headers","credentials","body","JSON","stringify","fetch","then","response","json","data","error","message","access_token","catch","className","children","onSubmit","title","type","name","autoComplete","onChange","target","value"],"sources":["/home/shankotai/ATI-IntranetPortal/react-goapp-sample/ATI-Portal/ui/src/components/Login.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useNavigate, useOutletContext } from \"react-router-dom\";\nimport Input from \"./form/Input\";\n\nconst Login = () => {\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassowrd] = useState(\"\");\n\n    const { setJwtToken } = useOutletContext();\n    const { setAlertClassName } = useOutletContext();\n    const { setAlertMessage } = useOutletContext();\n    const { toggleRefresh } = useOutletContext();\n\n    const navigate = useNavigate();\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        \n        // build the request payload\n        let payload = {\n            email: email,\n            password: password,\n        }\n\n        const requestOptions = {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json'                \n            },\n            credentials: 'include', \n            body: JSON.stringify(payload)\n        }\n\n        fetch(`/authenticate`, requestOptions)\n            .then((response) => response.json())\n            .then((data) => {\n                if (data.error) {\n                    setAlertClassName(\"alert-danger\")\n                    setAlertMessage(data.message)\n\n                } else {\n                    setJwtToken(data.access_token);\n                    setAlertClassName(\"d-none\")\n                    setAlertMessage(\"\")\n                    toggleRefresh(true);\n                    navigate(\"/\")\n                }\n            })\n            .catch(error => {\n                setAlertClassName(\"alert-danger\");\n                setAlertMessage(error);\n            })\n    }\n\n    return (        \n        <div className=\"col-md-6 offset-md-3\">\n\n            <h2>Login</h2>\n            <hr />\n\n            <form onSubmit={handleSubmit}>\n                <Input \n                    title=\"Email Address\"\n                    type=\"email\"\n                    className=\"form-control\"\n                    name=\"email\"\n                    autoComplete=\"email-new\"\n                    onChange={(event)=> setEmail(event.target.value)}\n                />\n\n                <Input \n                    title=\"Password\"\n                    type=\"password\"\n                    className=\"form-control\"\n                    name=\"password\"\n                    autoComplete=\"password-new\"\n                    onChange={(event)=> setPassowrd(event.target.value)}\n                />\n\n                <hr />\n\n                <input \n                    type=\"submit\"\n                    className=\"btn btn-primary\"\n                    value=\"Login\"\n                />\n            </form>\n        </div>        \n    )\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}